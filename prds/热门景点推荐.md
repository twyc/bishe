# 需求目的
景点数量过多，用户挑选困难，提高了系统使用门槛。
根据画像的首页推荐结果比较粗糙，不能利用其他用户的相关数据

# 需求内容
1. 访问量最大的n个景点
2. 过去24小时访问量最大的n个景点

# 技术实现预研
将景点id作为key，每次访问景点时自增1。
用户访问热门景点推荐后，遍历所有键值对排序取值。
其中顺序的维护可以利用sortedSet


# 目前想到的一些问题
为什么要用redis，而不是直接保存在服务器内存中，只处理键值对的简单逻辑对操作系统的资源
消耗也不大，访问redis和直接操作内存的消耗区别？
时间窗口的滑动方式，是给key设置过期时间，用类似lru的方式指定大小还是通过统计得到值？

# 遇到的一些问题
### Q1
数据是否需要落库，如果需要，落库频率和粒度怎么撕开
如果不落库缓存，可用性受redis制约，如何保证redis挂了之后功能的可用性？
### A
落库 设计一张表 保存景点访问次数
景点id、时间、访问次数

# 具体实现
目前只实现实时排行榜
新增表
对首页、景点展示、景点推荐等前端点击景点的地方调用接口上报
后端接收到后 将景点id作为key，操作redis 每天0点将redis中的数据落库清空
当redis不可用时 使用数据库中的历史数据返回