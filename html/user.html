<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=dba359696d9128e480e86a54ca9944f1"></script> 
	<script type="text/javascript" src="host.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基于游记文本的旅游景点推荐系统</title>    
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <link rel="stylesheet" href="css/marketing.css">
    <style type="text/css">
    		body,html{
				width: 100%;
				height: 100%;
			}
    		#tabler{
				width: 20%;
				height: 100%;
				margin: auto;
				float: left;
			}
			#container{
				width: 80%;
				height: 650px;
			}
    </style>
</head>
<body>
	<div id="app">
		<div class="header">
		    <div class="home-menu pure-menu pure-menu-horizontal pure-menu-fixed">
		        <a class="pure-menu-heading" href="index.html">首页</a>
		        <a class="pure-menu-heading" href="att.html">景点展示</a>
		        <a class="pure-menu-heading" href="attRecommend.html">景点推荐</a>
		        <a class="pure-menu-heading" href="route.html">路线查询</a>

		        <ul class="pure-menu-list">
		            <li class="pure-menu-item"><a class="pure-menu-link" v-text="name" type="button" @click="toUser()">{{name}}</a></li>
		            <li class="pure-menu-item"><a class="pure-menu-link" v-text="status" type="button" @click="changeStatus()">{{status}}</a></li>
		        </ul>
		    </div>
		</div>
		<br>
		<br>
		<div>
			<table class="pure-table pure-table-bordered">
		    <thead>
		        <tr>
		            <th>用户名</th>
		            <th>性别</th>
		            <th>年龄</th>
		            <th>教育背景</th>
		            <th>爱好</th>
		            <th>偏好</th>
		        </tr>
		    </thead>

		    <tbody>
		        <tr>
		            <td>{{name}}</td>
		            <td>{{gender}}</td>
		            <td>{{age}}</td>
		            <td>{{education}}</td>
		            <td>{{hobby}}</td>
		            <td>{{personal}}</td>
		        </tr>
		    </tbody>
		</table>
		</div>
	</div>
</body>

<script type="text/javascript">
	var app = new Vue({
		el:"#app",
		data:{
			name:"请登录",
			status:"login",//"sign up"
			isLogin: true,
			gender:"null",
			age:"null",
			education:"null",
			hobby:"null",
			personal:"null"
		},
		methods:{
			//右上角的个人中心
			toUser:function(){
				if (this.status=="login") {
					window.location="user.html";
				}else{
					return;
				}
			},
			//右上角的登录按钮
			changeStatus:function(){
				if (this.status=="login") {
					window.location="login.html";
				}else{
					this.name="请登录";
					this.status="login";
				}
			}
		},
		mounted:function() {
			var url = "http://"+host+":"+port+"/user/getUser";
			var that = this;
			axios.get(url,{
				withCredentials: true
			})
			.then(function (response) {
				console.log(response);
				var serverStatus = response.data.status;
				if (serverStatus=="not login") {
					return;
				}
				let user = response.data.data;
				that.isLogin = false;
				that.name = user.name;
				if (user.gender=="1") {
					that.gender="男";
				}else{
					that.gender="女";
				}
				that.age=user.age;
				if (user.education==1) {
					that.education="初中及以下";
				}else if (user.education==2){
					that.education="高中";
				}else{
					that.education="大学及以上";
				}
				if (!user.hobby) {
					that.hobby="null";
				}else{
					that.hobby=user.hobby;
				}
				that.personal = "";
				if (user.personal.charAt(0)=='1') {
					that.personal+=" 人文";
				}
				if (user.personal.charAt(1)=='1') {
					that.personal+=" 自然";
				}
				if (user.personal.charAt(2)=='1') {
					that.personal+=" 美食";
				}
				
				that.status = "sign up";
			})
			.catch(function (error) {
				console.log(error);
			});
		}

	});
</script>
</html>